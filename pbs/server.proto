syntax = "proto3";
package server;

import "shared.proto";

option go_package = "github.com/keihaya-com/connet/pbs";

message Authenticate {
  string token = 1;
}

message AuthenticateResp {
  shared.Error error = 1;

  shared.AddrPort origin = 2;
}

message Request {
  // Soft one-of
  Register register = 1;
  Connect connect = 2;

  message Register {
    string name = 1;
  }
  message Connect {
    string name = 1;
  }
}

message Response {
  shared.Error error = 1;

  Register register = 2;
  Connect connect = 3;

  message Register {
  }
  message Connect {
    repeated string direct_addresses = 4;
  }
}
